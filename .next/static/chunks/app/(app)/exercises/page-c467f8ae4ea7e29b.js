(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{2709:(e,r,t)=>{Promise.resolve().then(t.bind(t,6623))},6623:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(5155),i=t(2115),l=t(2619),s=t.n(l),d=t(2454);let n="rounded-full bg-v-ceil/15 px-2 py-1 text-v-dark/80 dark:bg-v-ceil/25 dark:text-white/90",o=["All","Relaxation","Focus","Mobility","Habits","Convergence","Therapy"],c=["All","Beginner","Intermediate","Advanced"];function x(){let[e,r]=(0,i.useState)(""),[t,l]=(0,i.useState)("All"),[s,n]=(0,i.useState)("All"),[x,m]=(0,i.useState)("relevance"),b=(0,i.useDeferredValue)(e),g=(0,i.useId)(),k=(0,i.useId)(),p=(0,i.useId)(),f=(0,i.useId)(),{data:w,isLoading:j,isError:y,error:N,refetch:A}=(0,d.I)({queryKey:["exercises",b,t,s],queryFn:async e=>{let{signal:r}=e,a=new URLSearchParams;b&&a.set("q",b),"All"!==t&&a.set("category",t),"All"!==s&&a.set("level",s);let i=await fetch("/api/exercises?".concat(a.toString()),{cache:"no-store",signal:r});if(!i.ok)throw Error("HTTP ".concat(i.status));return await i.json()},staleTime:3e4}),S=(0,i.useMemo)(()=>w?"relevance"===x?w:"title"===x?[...w].sort((e,r)=>e.title.localeCompare(r.title)):"duration-asc"===x?[...w].sort((e,r)=>{var t,a;return(null!=(t=e.duration)?t:0)-(null!=(a=r.duration)?a:0)}):"duration-desc"===x?[...w].sort((e,r)=>{var t,a;return(null!=(t=r.duration)?t:0)-(null!=(a=e.duration)?a:0)}):w:[],[w,x]),C=S.length;return(0,a.jsxs)("section",{className:"py-6 sm:py-8",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-end justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-manrope text-3xl font-extrabold text-v-dark dark:text-v-white",children:"Exercises"}),(0,a.jsx)("p",{className:"mt-1 text-v-dark/80 dark:text-v-white/80",children:"Short, guided routines to reduce eye strain and improve comfort."})]}),(0,a.jsx)("p",{className:"text-sm text-v-dark/70 dark:text-white/70","aria-live":"polite",children:j?"Loading…":"".concat(C," result").concat(1===C?"":"s")})]}),(0,a.jsx)("div",{className:"sticky top-4 z-10 mt-5 rounded-2xl border border-v-dark/10 bg-v-white/85 p-3 backdrop-blur-md dark:border-white/10 dark:bg-[#0b1a33]/85",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"w-full md:w-[340px]",children:[(0,a.jsx)("label",{htmlFor:g,className:"sr-only",children:"Search exercises"}),(0,a.jsx)("input",{id:g,value:e,onChange:e=>r(e.target.value),placeholder:"Search exercises",className:"w-full rounded-xl border border-v-dark/10 bg-v-white px-4 py-2 text-v-dark outline-none ring-v-ceil/30 focus:ring-4 dark:bg-[#0b1a33] dark:text-v-white dark:border-white/10"})]}),(0,a.jsx)(h,{id:k,label:"Category",options:o,value:t,onChange:e=>l(e)}),(0,a.jsx)(u,{id:p,label:"Level",options:c,value:s,onChange:e=>n(e)}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2 text-sm text-v-dark/70 dark:text-white/70",children:[(0,a.jsx)("label",{htmlFor:f,children:"Sort"}),(0,a.jsxs)("select",{id:f,value:x,onChange:e=>m(e.target.value),className:"rounded-xl border border-v-dark/10 bg-v-white px-3 py-1.5 text-v-dark dark:bg-[#0b1a33] dark:text-v-white dark:border-white/10","aria-label":"Sort exercises",children:[(0,a.jsx)("option",{value:"relevance",children:"Relevance"}),(0,a.jsx)("option",{value:"title",children:"Title A–Z"}),(0,a.jsx)("option",{value:"duration-asc",children:"Short → Long"}),(0,a.jsx)("option",{value:"duration-desc",children:"Long → Short"})]})]})]})}),(0,a.jsx)(v,{isLoading:j,isError:y,error:N,onRetry:A,items:S,query:e})]})}function h(e){let{id:r,label:t,options:i,value:l,onChange:s}=e,d=i.indexOf(l);return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",role:"radiogroup","aria-labelledby":"".concat(r,"-label"),onKeyDown:e=>{if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;e.preventDefault();let r=(d+("ArrowLeft"===e.key||"ArrowUp"===e.key?-1:1)+i.length)%i.length;s(i[r])},children:[(0,a.jsx)("span",{id:"".concat(r,"-label"),className:"sr-only",children:t}),i.map((e,r)=>{let t=l===e;return(0,a.jsx)("button",{role:"radio","aria-checked":t,tabIndex:t?0:-1,onClick:()=>s(e),className:"rounded-full px-3 py-1 text-sm outline-none transition "+(t?"bg-v-ceil text-white ring-4 ring-v-ceil/25":"bg-v-dark/5 text-v-dark hover:bg-v-dark/10 dark:bg-white/10 dark:text-white/90 dark:hover:bg-white/20 focus-visible:ring-4 focus-visible:ring-v-ceil/30"),children:e},e)})]})}function u(e){let{id:r,label:t,options:i,value:l,onChange:s}=e,d=i.indexOf(l);return(0,a.jsxs)("div",{className:"inline-flex overflow-hidden rounded-xl ring-1 ring-v-dark/10 dark:ring-white/10",role:"radiogroup","aria-labelledby":"".concat(r,"-label"),onKeyDown:e=>{if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;e.preventDefault();let r=(d+("ArrowLeft"===e.key||"ArrowUp"===e.key?-1:1)+i.length)%i.length;s(i[r])},children:[(0,a.jsx)("span",{id:"".concat(r,"-label"),className:"sr-only",children:t}),i.map(e=>{let r=l===e;return(0,a.jsx)("button",{role:"radio","aria-checked":r,tabIndex:r?0:-1,onClick:()=>s(e),className:"px-3 py-1.5 text-sm outline-none transition "+(r?"bg-v-ceil text-white ring-4 ring-v-ceil/25":"bg-v-white text-v-dark hover:bg-v-dark/5 dark:bg-[#0b1a33] dark:text-white/85 dark:hover:bg-white/10 focus-visible:ring-4 focus-visible:ring-v-ceil/30"),children:e},e)})]})}function v(e){let{isLoading:r,isError:t,error:i,onRetry:l,items:s,query:d}=e;return(0,a.jsx)("div",{className:"mt-6 min-h-[520px]",children:t?(0,a.jsx)("div",{className:"rounded-2xl border border-red-300/40 bg-red-50 p-4 text-red-800 dark:border-red-400/30 dark:bg-red-950/40 dark:text-red-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("p",{children:["Failed to load: ",null==i?void 0:i.message]}),(0,a.jsx)("button",{onClick:l,className:"rounded-lg bg-red-600/10 px-3 py-1.5 text-sm text-red-700 hover:bg-red-600/20 dark:text-red-200",children:"Retry"})]})}):r?(0,a.jsx)(b,{}):s.length?(0,a.jsx)("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3","aria-busy":r,"aria-live":"polite",children:s.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(m,{ex:e})},e.id))}):(0,a.jsx)(g,{query:d,onReset:l})})}function m(e){var r;let{ex:t}=e;return(0,a.jsxs)("article",{className:"group relative flex h-full flex-col overflow-hidden rounded-2xl border border-v-dark/10 bg-v-white p-5 shadow-soft transition hover:-translate-y-0.5 hover:shadow-lg focus-within:shadow-lg dark:bg-[#0b1a33] dark:border-white/10 min-h-[232px]","aria-labelledby":"ex-".concat(t.id,"-title"),children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-[3px] rounded-t-2xl bg-gradient-to-r from-v-ceil/80 via-v-ceil/20 to-v-ceil/80"}),(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsx)("h3",{id:"ex-".concat(t.id,"-title"),className:"font-manrope text-lg font-semibold text-v-dark dark:text-v-white",children:t.title}),(0,a.jsx)("span",{className:"rounded-full bg-v-dark/5 px-2 py-1 text-v-dark/70 dark:bg-white/10 dark:text-white/80 shrink-0 px-3",children:null!=(r=t.durationLabel)?r:t.duration?"".concat(t.duration,"m"):"—"})]}),(0,a.jsx)("p",{className:"mt-2 line-clamp-3 text-sm text-v-dark/85 dark:text-v-white/85",children:t.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:[(0,a.jsx)("span",{className:n,children:t.category}),(0,a.jsx)("span",{className:n,children:t.level})]}),(0,a.jsxs)("div",{className:"mt-auto flex items-center gap-3 pt-4",children:[(0,a.jsx)(s(),{href:"/exercises/".concat(t.id),className:"inline-flex items-center justify-center rounded-xl bg-v-ceil px-4 py-2 text-sm font-semibold text-white transition hover:opacity-90 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-v-ceil/30","aria-label":"Start ".concat(t.title),children:"Start"}),(0,a.jsx)(s(),{href:"/exercises/".concat(t.id),className:"text-sm text-v-dark/70 underline-offset-2 hover:text-v-dark hover:underline dark:text-white/75 dark:hover:text-white","aria-label":"View details for ".concat(t.title),children:"Details"})]})]})}function b(){return(0,a.jsx)("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3","aria-hidden":"true",children:Array.from({length:6}).map((e,r)=>(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"min-h-[232px] rounded-2xl border border-v-dark/10 bg-v-white p-5 shadow-soft dark:bg-[#0b1a33] dark:border-white/10",children:[(0,a.jsx)("div",{className:"h-4 w-1/2 animate-pulse rounded bg-v-dark/10 dark:bg-white/10"}),(0,a.jsx)("div",{className:"mt-2 h-3 w-3/4 animate-pulse rounded bg-v-dark/10 dark:bg-white/10"}),(0,a.jsx)("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-v-dark/10 dark:bg-white/10"}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,a.jsx)("div",{className:"h-6 w-16 animate-pulse rounded-full bg-v-dark/10 dark:bg-white/10"}),(0,a.jsx)("div",{className:"h-6 w-20 animate-pulse rounded-full bg-v-dark/10 dark:bg-white/10"})]}),(0,a.jsx)("div",{className:"mt-4 h-9 w-24 animate-pulse rounded-xl bg-v-dark/10 dark:bg-white/10"})]})},r))})}function g(e){let{query:r,onReset:t}=e;return(0,a.jsxs)("div",{className:"rounded-2xl border border-v-dark/10 bg-v-white p-8 text-center dark:border-white/10 dark:bg-[#0b1a33]",children:[(0,a.jsx)("h3",{className:"font-manrope text-lg font-semibold text-v-dark dark:text-white",children:"No results"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-v-dark/75 dark:text-white/75",children:r?(0,a.jsxs)(a.Fragment,{children:["We couldn’t find exercises matching “",r,"”. Try a different search or filter."]}):(0,a.jsx)(a.Fragment,{children:"Try adjusting your filters."})}),(0,a.jsx)("button",{onClick:t,className:"mt-4 inline-flex items-center justify-center rounded-xl bg-v-ceil px-4 py-2 text-sm font-semibold text-white outline-none focus-visible:ring-4 focus-visible:ring-v-ceil/30",children:"Reset"})]})}}},e=>{e.O(0,[619,743,454,441,255,358],()=>e(e.s=2709)),_N_E=e.O()}]);